<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>EduConnect | Login</title>
    <link rel="stylesheet" href="login-style.css" />
  </head>
  <body>
    <div class="login-wrapper">
      <div class="form-container">
        <i class="fas fa-graduation-cap"></i>
        <h1 class="logo">EduConnect</h1>
        <p class="subtitle">Connecting Rural Education</p>

        <form id="loginForm">
          <!-- Username Input -->
          <div class="form-control">
            <input type="text" id="username" required />
            <label>
              <span style="transition-delay: 0ms">E</span
              ><span style="transition-delay: 50ms">m</span
              ><span style="transition-delay: 100ms">a</span
              ><span style="transition-delay: 150ms">i</span
              ><span style="transition-delay: 200ms">l</span>
            </label>
          </div>

          <!-- Password Input -->
          <div class="form-control">
            <input type="password" id="password" required />
            <label>
              <span style="transition-delay: 0ms">P</span
              ><span style="transition-delay: 50ms">a</span
              ><span style="transition-delay: 100ms">s</span
              ><span style="transition-delay: 150ms">s</span
              ><span style="transition-delay: 200ms">w</span
              ><span style="transition-delay: 250ms">o</span
              ><span style="transition-delay: 300ms">r</span
              ><span style="transition-delay: 350ms">d</span>
            </label>
          </div>

          <!-- From Uiverse.io by 00Kubi -->
                      <div class="showpass">
              <label class="neon-checkbox">
                <input type="checkbox" id="showPassword" />
                <div class="neon-checkbox__frame">
                  <div class="neon-checkbox__box">
                    <div class="neon-checkbox__check-container">
                      <svg viewBox="0 0 24 24" class="neon-checkbox__check">
                        <path d="M3,12.5l7,7L21,5"></path>
                      </svg>
                    </div>
                  </div>
                </div>
              </label>
              <span>Show Password</span>
            </div>

            <!-- <div class="neon-checkbox__frame">
              <div class="neon-checkbox__box">
                <div class="neon-checkbox__check-container">
                  <svg viewBox="0 0 24 24" class="neon-checkbox__check">
                    <path d="M3,12.5l7,7L21,5"></path>
                  </svg>
                </div>
                <div class="neon-checkbox__glow"></div>
                <div class="neon-checkbox__borders">
                  <span></span><span></span><span></span><span></span>
                </div>
              </div>
              <div class="neon-checkbox__effects">
                <div class="neon-checkbox__particles">
                  <span></span><span></span><span></span><span></span>
                  <span></span><span></span><span></span><span></span>
                  <span></span><span></span><span></span><span></span>
                </div>
                <div class="neon-checkbox__rings">
                  <div class="ring"></div>
                  <div class="ring"></div>
                  <div class="ring"></div>
                </div>
                <div class="neon-checkbox__sparks">
                  <span></span><span></span><span></span><span></span>
                </div>
              </div>
            </div> -->
          </label>

          <p id="errorMsg"></p>

          <!-- Animated Button -->
          <button type="submit" class="button">
            <span class="shadow"></span>
            <span class="edge"></span>
            <span class="front">Log In</span>
          </button>
        </form>

        <p class="link">
          Don't have an account? <a href="register.html">Register</a>
        </p>
      </div>
    </div>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
      import {
        getAuth,
        signInWithEmailAndPassword,
      } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-auth.js";

      const firebaseConfig = {
        apiKey: "AIzaSyASx50b8ROauA0M9J9dJp737QTfbdr1IAs",
        authDomain: "educonnect-57f76.firebaseapp.com",
        projectId: "educonnect-57f76",
        storageBucket: "educonnect-57f76.appspot.com",
        messagingSenderId: "742758782675",
        appId: "1:742758782675:web:5ebe067b5d6b725cefe626",
        measurementId: "G-5L09MFWZQ2",
      };

      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);

      document
        .getElementById("loginForm")
        .addEventListener("submit", async function (e) {
          e.preventDefault();

          const email = document.getElementById("username").value.trim();
          const password = document.getElementById("password").value;
          const errorMsg = document.getElementById("errorMsg");
          errorMsg.textContent = "";

          try {
            await signInWithEmailAndPassword(auth, email, password);
            window.location.href = "dashboard.html";
          } catch (error) {
            errorMsg.textContent = error.message;
          }
        });

      document
        .getElementById("showPassword")
        .addEventListener("change", function () {
          const passwordField = document.getElementById("password");
          passwordField.type = this.checked ? "text" : "password";
        });
    </script>
  </body>
</html>
